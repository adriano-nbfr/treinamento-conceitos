<app-card titulo="Usuários - Listagem">
  <div class="input-group">
    <input type="text" class="form-control" placeholder="Filtrar..."
      [formControl]="filtro" #inputFiltro>

    <button class="btn btn-outline-secondary"
      (click)="filtro.setValue(''); inputFiltro.focus()">Limpar</button>
  </div>


  <table class="table table-striped mt-4">
    <thead class="border-top">
      <tr><th>Nome</th><th>E-mail</th><th>Matrícula</th><th>Dt. Nascimento</th></tr>
    </thead>
    <tbody>
      @if (carregando) {
        <tr><td colspan="5">Carregando usuários...</td></tr>
      }
      @else if (erro) {
        <tr><td colspan="5" class="text-danger">{{erro}}</td></tr>
      }
      @else {
        @for (usuario of (listagemFiltrada$ | async); track usuario.id) {
          <tr>
            <td>{{usuario.nome}}</td>
            <td>{{usuario.email}}</td>
            <td>{{usuario.matricula}}</td>
            <td>{{usuario.dataNascimento | date : 'dd/MM/yyyy'}}</td>
          </tr>
        }
        @empty {
          <tr><td colspan="4">Nenhum usuário encontrado.</td></tr>
        }
      }
    </tbody>
  </table>
</app-card>
